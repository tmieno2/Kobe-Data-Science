---
title: "Ex-1-3: Reshape Datasets"
format:
  html:
    toc: true
    toc-location: left
    number-sections: true
    callout-icon: false
    echo: true
    fig-dpi: 400
webr:
  packages: ['dplyr', 'ggplot2', 'tibble', 'tidyr']
  cell-options:
    editor-font-scale: 0.7
    out-width: 80%
filters:
  - webr
---


```{r}
#| include: false 
library(dplyr) 
library(tidyr) 
```

# Exercise 1


## Problem 1

**Datasets:** `crop_data` synthetically generated withint R.

**Task:** Reshape the `economics` dataset to wide format using `tidyr::pivor_wider()`. In doing so, append `yield_` to the new column names using the `names_prefix` option.

**Load and Create Dataset:**
```{webr-r}
# create the dataset
#| autorun: true
(
crop_data <-
  tibble(
    year = rep(2020:2022, each = 3),
    crop = rep(c("Wheat", "Corn", "Soybean"), times = 3),
    yield = c(3.1, 3.5, 2.8, 3.2, 3.6, 2.9, 3.0, 3.7, 3.1)
  )
)
```

::: {.panel-tabset}

### Work here

```{webr-r}
#--- work here ---#




```

Here is the output of successfully reshaped data:

```{webr-r}
#| context: output
( 
crop_data_wide <-  
  crop_data %>%
  tidyr::pivot_wider(names_from = "crop", values_from = "yield", names_prefix = "yield_")
)
```

### Answer

```{webr-r}
# Pivot data from wide to long
#| autorun: true
crop_data %>%
  tidyr::pivot_wider(names_from = "crop", values_from = "yield", names_prefix = "yield_")
```
:::
<!--end of panel-->


## Problem 2

**Datasets:** the `crop_data_wide` (`crop_data` in wide format)

**Task:** Reshape the `economics` dataset to long format using `tidyr::pivor_longer()`. In doing so, remove `yield_` from the column names using the `names_prefix` option.

**Load and Create Dataset:**
```{webr-r}
# create the dataset
#| autorun: true
crop_data_wide
```

::: {.panel-tabset}

### Work here

```{webr-r}
#--- work here ---#




```

Here is the output of successfully reshaped data:

```{webr-r}
#| context: output
crop_data_wide %>%
  tidyr::pivot_longer(cols = -year, names_to = "crop", values_to = "yield", names_prefix = "yield_")
```

### Answer

```{webr-r}
# Pivot data from wide to long
crop_data_wide %>%
  tidyr::pivot_longer(
    cols = -year, 
    names_to = "crop", 
    values_to = "yield", 
    names_prefix = "yield_"
  )
```
:::
<!--end of panel-->

